{"remainingRequest":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/account/withdrawList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/account/withdrawList.vue","mtime":1562670944000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            withdrawList: false,\r\n            modals: false,\r\n            carddata: [],\r\n            carddatas: [],\r\n            tableDataBegin: [],\r\n            tableDataName: '',\r\n            tableDataEnd: [],\r\n            currentPage: 0,\r\n            pageSize: 0,\r\n            modal: false,\r\n            cardmodal: false,\r\n            modal_time: false,\r\n            total: 0,\r\n            limit: 15,\r\n            currentPages: 0,\r\n            pageSizes: 0,\r\n            totals: 0,\r\n            idss: [],\r\n            courseId: '',\r\n            val: 1,\r\n            vals: 1,\r\n            page: '',\r\n            ruleForm: {},\r\n            rules: {\r\n                bankName: [{\r\n                    required: true,\r\n                    message: '请输入课程标题',\r\n                    trigger: 'blur'\r\n                }],\r\n                bankOfDeposit: [{\r\n                    required: true,\r\n                    message: '请输入课程时间',\r\n                    trigger: 'blur'\r\n                }],\r\n                userName: [{\r\n                    required: true,\r\n                    message: '请输入课程描述',\r\n                    trigger: 'blur'\r\n                }],\r\n                accountNumber: [{\r\n                    required: true,\r\n                    message: '请输入课程描述',\r\n                    trigger: 'blur'\r\n                }]\r\n            }\r\n        }\r\n    },\r\n    multipleSelection: [],\r\n    mounted() {\r\n        this.getTableData()\r\n        this.getcardlist()\r\n    },\r\n    filters:{\r\n      getMonth(data){\r\n        return data.split(' ')[0].split('-')[0] + '年' +  data.split(' ')[0].split('-')[1] + '月'\r\n      }\r\n    },\r\n    methods: {\r\n        search() {\r\n            this.getTableData()\r\n        },\r\n        getTableData: function() {\r\n            this.withdrawList = true\r\n            this.$axios({\r\n                url: this.$api.baseURL + 'api/teacher/account/payrollList',\r\n                params: {\r\n                    'page': this.val,\r\n                    'limit': this.limit,\r\n                    // 'type': 1,\r\n                    // 'key': this.tableDataName\r\n                }\r\n            }).then(r => {\r\n                this.withdrawList = false\r\n                this.tableDataEnd = r.data.body.list\r\n                this.total = r.data.body.totalCount\r\n                this.pageSize = r.data.body.totalCount\r\n                this.currentPage = r.data.body.currPage\r\n            }).catch(er => {\r\n                this.withdrawList = false\r\n            })\r\n        },\r\n        getUser() {\r\n            this.$axios({\r\n                url: this.$api.baseURL + 'api/teacher/user/getMyInfo'\r\n            }).then(r => {\r\n              if (r.status === 400) {\r\n                        if (r.body.code === 4011) {\r\n                            this.$router.push({ path: \"/login\" });\r\n                        }\r\n                    }\r\n                this.user = r.body\r\n            })\r\n        },\r\n        objection(row, index){\r\n          this.$message({\r\n            type:'success',\r\n            message:'已发送异议申请，请耐心等待师资管理审核'\r\n          })\r\n        },\r\n        seemodel(row, index) {\r\n            window.open(this.$api.baseURL + \"/appweb/wageList.html?id=\" + row.id + \"&token=\" + window.localStorage.getItem('teactoken'));\r\n            // this.modals = true\r\n            // if (row.withdrawedIds == '') {\r\n            //     this.logIds = 0\r\n            // } else {\r\n            //     this.logIds = row.withdrawedIds\r\n            // }\r\n            // this.getcardlists()\r\n        },\r\n        getcardlists() {\r\n            // var self = this\r\n            // $.ajax({\r\n            //     type: 'get',\r\n            //     dataType: 'json',\r\n            //     data: {\r\n            //         'token': token,\r\n            //         'page': this.vals,\r\n            //         'limit': 5,\r\n            //         'logIds': vm.logIds,\r\n            //         'withdrawed': 1\r\n            //     },\r\n            //     url: '' + baseURL + '/api/teacher/account/getIncomeList',\r\n            //     success: function(json) {\r\n            //         vm.carddatas = json.body.list\r\n            //         vm.cards = json.body.list\r\n            //         vm.totals = json.body.totalCount\r\n            //         vm.pageSizes = json.body.totalCount\r\n            //         vm.currentPages = json.body.currPage\r\n            //     }\r\n            // })\r\n        },\r\n        apply(row, index) {\r\n            this.modal = true\r\n        },\r\n        add() {\r\n            this.cardmodal = true\r\n        },\r\n        getcardlist() {\r\n            this.$axios({\r\n                url: this.$api.baseURL + 'api/teacher/bankcard/list',\r\n                params: {\r\n                    'page': 1,\r\n                    'limit': 1000\r\n                }\r\n            }).then(r => {\r\n                this.carddata = r.data.body.list\r\n            })\r\n        },\r\n        remove(row, index) {\r\n            // const cardid = []\r\n            // cardid.push('' + row.id + '')\r\n            // this.$confirm('是否解绑?', '提示', {\r\n            //     confirmButtonText: '确定',\r\n            //     cancelButtonText: '取消',\r\n            //     type: 'warning'\r\n            // })\r\n            //     .then(_ => {\r\n            //         $.ajax({\r\n            //             type: 'post',\r\n            //             contentType: 'application/json',\r\n            //             headers: {\r\n            //                 'token': token\r\n            //             },\r\n            //             data: JSON.stringify(\r\n            //                 cardid\r\n            //             ),\r\n            //             url: '' + baseURL + 'api/teacher/bankcard/delete',\r\n            //             success: function(json) {\r\n            //                 if (json.status == 200) {\r\n            //                     vm.$message({\r\n            //                         message: '解绑成功',\r\n            //                         type: 'success'\r\n            //                     })\r\n            //                     vm.getcardlist()\r\n            //                 }\r\n            //                 if (json.status == 400) {\r\n            //                     vm.$message({\r\n            //                         message: '解绑失败',\r\n            //                         type: 'warning'\r\n            //                     })\r\n            //                     vm.getcardlist()\r\n            //                 }\r\n            //             }\r\n            //         })\r\n            //     })\r\n            //     .catch(_ => {})\r\n        },\r\n        handleSizeChange(val) {\r\n            console.log(`每页 ${val} 条`)\r\n            this.limit = val\r\n            this.getTableData()\r\n        },\r\n\r\n        handleChangearea(val) {\r\n            let obj = {}\r\n            obj = this.selects.find((item) => {\r\n                return item.userId === val\r\n            })\r\n            this.userId = obj.userId\r\n            this.username = obj.username\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.val = val\r\n            this.getTableData()\r\n        },\r\n        handleCurrentChange1(val) {\r\n            this.vals = val\r\n            this.getcardlists()\r\n        },\r\n        submitForm(formName) {\r\n            // const _this = this\r\n            // var datas = _this.ruleForm\r\n            // var course_data = datas.course_data\r\n            // this.$refs[formName].validate((valid) => {\r\n            //     if (valid) {\r\n            //         $.ajax({\r\n            //             type: 'post',\r\n            //             dataType: 'json',\r\n            //             cache: false,\r\n            //             contentType: 'application/json',\r\n            //             headers: {\r\n            //                 'token': token\r\n            //             },\r\n            //             data: JSON.stringify({\r\n            //                 'teacId': vm.teacId,\r\n            //                 'userName': this.$refs.ruleForm.model.userName,\r\n            //                 'bankOfDeposit': this.$refs.ruleForm.model.bankOfDeposit,\r\n            //                 'accountNumber': this.$refs.ruleForm.model.accountNumber,\r\n            //                 'bankName': this.$refs.ruleForm.model.bankName\r\n            //             }),\r\n            //             url: '' + baseURL + 'api/teacher/bankcard/save',\r\n            //             success: function(json) {\r\n            //                 if (json.status == '200') {\r\n            //                     vm.$message({\r\n            //                         message: '添加银行卡成功',\r\n            //                         type: 'success'\r\n            //                     })\r\n            //                     vm.cardmodal = false\r\n            //                     vm.getcardlist()\r\n            //                 }\r\n            //                 if (json.status == '400') {\r\n            //                     vm.$message({\r\n            //                         message: json.body.msg,\r\n            //                         type: 'warning'\r\n            //                     })\r\n            //                     vm.cardmodal = false\r\n            //                 }\r\n            //             }\r\n            //         })\r\n            //     }\r\n            // })\r\n        },\r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val\r\n            const ids = []\r\n            this.multipleSelection.map((item) => {\r\n                var id = item.id\r\n                ids.push('' + id + '')\r\n            })\r\n            this.selectedIDs = ids\r\n            console.log('多选', ids)\r\n            this.idss = this.selectedIDs\r\n            console.log(this.idss)\r\n        }\r\n    }\r\n}\r\n",null]}
{"remainingRequest":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/detail/bigClassRoom.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/detail/bigClassRoom.vue","mtime":1566888552400},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getLocal } from '@/utils/auth'\r\nexport default {\r\n    rounding(value) {\r\n        return value.toFixed(2)\r\n    },\r\n    spliting(value) {\r\n        return value.split(' ')[0]\r\n    },\r\n    data() {\r\n        return {\r\n            coursesItem: [],\r\n            bigClassRoom: false,\r\n            personid: '',\r\n            currentPage: 0,\r\n            pageSize: 0,\r\n            total: 0,\r\n            limit: 0,\r\n            personpage: 1,\r\n            personlimit: 5,\r\n            persondata: [],\r\n            personmodel: false,\r\n            aboutOrder: false,\r\n            radshow: false,\r\n            fileList1: [],\r\n            myHeaders1: {\r\n                token: getLocal('teactoken')\r\n            },\r\n            url1: this.$api.baseURL + 'sys/seller/order/evidenceThumbSave',\r\n            data1: {\r\n                amount: '',\r\n                current: '',\r\n                studId: ''\r\n            },\r\n            b1: false,\r\n            b2: '确 定',\r\n            s1: true,\r\n            s2: true,\r\n            red: '',\r\n            radio: '1',\r\n            badMoney: '',\r\n            isFromOrder: true,\r\n            mm1: false,\r\n            mm: false,\r\n            studCourses: [],\r\n            fileList: [],\r\n            myHeaders: {\r\n                token: getLocal('teactoken')\r\n            },\r\n            url: this.$api.baseURL + 'sys/seller/courseware/save',\r\n            data: {\r\n                cdId: '',\r\n                groupId: ''\r\n            },\r\n            btnstatus: false,\r\n            dialogVisible: false,\r\n            checked: false,\r\n            courses: '',\r\n            history: '',\r\n            urls: [],\r\n            id: '',\r\n            classroomdata: [],\r\n            extSysPaymentdata: [],\r\n            studCoursewareList: [],\r\n            filelist: [],\r\n            ruleForm: {\r\n                preferential: '',\r\n                teacNickName: '',\r\n                materialCost: '',\r\n                course: '',\r\n                parentTotalPrice: '',\r\n                Integer: '',\r\n                parentLastPrepayment: '',\r\n                temCourseName: '',\r\n                universityName: '',\r\n                statused: '',\r\n                studUser: ''\r\n            },\r\n            ruleForm1: {\r\n                username: '',\r\n                nickname: '',\r\n                sellerDemandDesc: '',\r\n                persenterTime: '',\r\n                allSchooltime: '',\r\n                reaMonetary: '',\r\n                current: '',\r\n                amount1: '',\r\n                amount: '',\r\n                studname: '',\r\n                studId: ''\r\n\r\n            },\r\n            ruleForm2: {\r\n                courseCode: '',\r\n                courseName: '',\r\n                type: '',\r\n                current: '',\r\n                amount: '',\r\n                studId: '',\r\n                id: '',\r\n                amount1: '',\r\n                courseId: ''\r\n            },\r\n            rules1: {},\r\n            rules: {}\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getclassroomdata()\r\n        this.coursedata()\r\n    },\r\n    methods: {\r\n        handlePreview(file) {\r\n            console.log(file)\r\n        },\r\n        success(response, file, fileList) {\r\n            if (response.status == 200) {\r\n                this.$message({\r\n                    message: '上传文件成功',\r\n                    type: 'success'\r\n                })\r\n                // this.fileList = []\r\n                // $('.ul').empty()\r\n                // this.getclassroomdata()\r\n                window.location.reload()\r\n            }\r\n            if (response.status == 400) {\r\n                this.$message({\r\n                    message: response.body.msg,\r\n                    type: 'warning'\r\n                })\r\n                this.fileList = []\r\n            }\r\n        },\r\n        onerror(response, file, fileList) {\r\n            this.$message({\r\n                message: response.body.msg,\r\n                type: 'warning'\r\n            })\r\n        },\r\n        change_lession(row, index) {\r\n            window.location.href = 'editClassroomOrder.html?id=' + row.courseId + ''\r\n        },\r\n        change(file, fileList) {\r\n            // getUrlStr = function(name) {\r\n            //     var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)')\r\n            //     var r = window.location.search.substr(1).match(reg)\r\n            //     if (r != null) return unescape(r[2])\r\n            //     return null\r\n            // }\r\n            var id = this.$route.query.id\r\n            this.data.cdId = id\r\n        },\r\n        handleRemove(file, fileList) {},\r\n        uploadFile(file) {\r\n            this.formDate = new FormData()\r\n            this.formDate.append('file', file.file)\r\n            debugger\r\n        },\r\n        submitUpload() {\r\n            this.$refs.upload.submit()\r\n        },\r\n        check(val) {\r\n            // if (val == true) {\r\n            //     $('.checkbox').prop('checked', true)\r\n            // } else {\r\n            //     $('.checkbox').prop('checked', false)\r\n            // }\r\n        },\r\n        coursedata() {\r\n            this.$axios({\r\n                url: this.$api.baseURL + 'api/teacher/courseware/groupList',\r\n                params: {\r\n                    page: 1,\r\n                    limit: 1000\r\n                }\r\n            }).then(r => {\r\n                var lists = []\r\n                r.data.body.list.forEach(function(element) {\r\n                    var list = {}\r\n                    list.groupName = element.groupName\r\n                    list.name = element.groupName.split(' ')[0]\r\n                    list.id = element.id\r\n                    lists.push(list)\r\n                })\r\n                this.courses = lists\r\n            })\r\n        },\r\n        change_course(courseid) {\r\n            this.data.groupId = courseid\r\n        },\r\n        // downfile() {\r\n        //     this.$message({\r\n        //         message: '文件正在服务器打包,请耐心等待,不要刷新页面',\r\n        //         type: 'success'\r\n        //     })\r\n        //     this.btnstatus = true\r\n        //     var arr = []\r\n        //     var checkedCount = 0\r\n        //     for (var i = 0; i < $('#ul li input').length; i++) {\r\n        //         var Uarry = $('#ul li input')\r\n        //         var Tresult = Uarry.eq(i).attr('data-name')\r\n        //         var checkbox = document.getElementsByName('tie_in[]')\r\n        //         if (checkbox[i].checked) {\r\n        //             checkedCount++\r\n        //             arr.push(Tresult)\r\n        //         }\r\n        //     }\r\n        //     var arrjoin = arr.join(';')\r\n        //     $.ajax({\r\n        //         type: 'GET',\r\n        //         dataType: 'json',\r\n        //         headers: {\r\n        //             'token': token\r\n        //         },\r\n        //         data: {\r\n        //             fileStr: arrjoin\r\n        //         },\r\n        //         url: '' + baseURL + '/resource/getZipFile',\r\n        //         success: function(json) {\r\n        //             if (json.status == 200) {\r\n        //                 this.btnstatus = false\r\n        //                 this.$message({\r\n        //                     message: '文件正在服务器打包,请耐心等待,不要刷新页面',\r\n        //                     type: 'success'\r\n        //                 })\r\n        //                 window.open(json.body.filePath)\r\n        //             }\r\n        //         }\r\n        //     })\r\n        // },\r\n        // del(row, index) {\r\n        //     this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n        //         confirmButtonText: '确定',\r\n        //         cancelButtonText: '取消',\r\n        //         type: 'warning'\r\n        //     }).then(() => {\r\n        //         $.ajax({\r\n        //             type: 'POST',\r\n        //             dataType: 'json',\r\n        //             headers: {\r\n        //                 'token': token\r\n        //             },\r\n        //             data: JSON.stringify([row.id]),\r\n        //             url: '' + baseURL + 'sys/seller/courseware/delete',\r\n        //             success: function(json) {\r\n        //                 this.$message({\r\n        //                     type: 'success',\r\n        //                     message: '删除成功!'\r\n        //                 })\r\n        //                 this.getclassroomdata()\r\n        //             }\r\n        //         })\r\n        //     }).catch(() => {})\r\n        // },\r\n        getclassroomdata: function() {\r\n            // getUrlStr = function(name) {\r\n            //     var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)')\r\n            //     var r = window.location.search.substr(1).match(reg)\r\n            //     if (r != null) return unescape(r[2])\r\n            //     return null\r\n            // }\r\n            var id = this.$route.query.id\r\n            var parentId = this.$route.query.parentId\r\n            if (parentId == 'null') {\r\n                // $('#parents').css('display', 'none')\r\n                document.getElementById('parents').style.display = 'none'\r\n            }\r\n            this.bigClassRoom = true\r\n            this.$axios({\r\n                url: this.$api.baseURL + '/api/teacher/classcourse/queryClassCourseInfo?id=' + id + '',\r\n                params: {\r\n                    'page': 1,\r\n                    'limit': 6,\r\n                    'isBig': true\r\n                }\r\n            }).then(r => {\r\n                var json = r.data\r\n                if (json.status == 400) {\r\n                    alert(json.body.msg)\r\n                    return\r\n                }\r\n                this.classroomdata = json.body.classroomList\r\n                if (json.body.studPurchaseOrder.endCourseTime !== null) {\r\n                    this.ruleForm.endCourseTime = json.body.studPurchaseOrder\r\n                        .endCourseTime.substring(0, 10)\r\n                }\r\n                if (json.body.studPurchaseOrder.examTime !== null) {\r\n                    this.ruleForm.examTime = json.body.studPurchaseOrder.examTime\r\n                        .substring(0, 10)\r\n                }\r\n                this.ruleForm.explained = json.body.studPurchaseOrder.sellerDemandDesc\r\n                this.ruleForm.temCourseName = json.body.studPurchaseOrder.courseName\r\n                this.ruleForm.courseCode = json.body.studPurchaseOrder.courseCode\r\n                this.ruleForm.universityName = json.body.studPurchaseOrder.universityName\r\n                this.ruleForm.sysSeller = json.body.sysSeller.username\r\n                this.ruleForm.teacNickName = json.body.teacNickName\r\n                this.extSysPaymentdata = json.body.studClassStudents\r\n                var studPreferentialPolicies = []\r\n                json.body.studPreferentialPolicies.forEach(element => {\r\n                    studPreferentialPolicies.push(Number(element.preferential) + '折')\r\n                })\r\n                this.ruleForm.preferential = studPreferentialPolicies.join(';')\r\n                if (json.body.statused == 8) {\r\n                    this.ruleForm.statused = '待规划(等待教师/运营接单)'\r\n                }\r\n                if (json.body.statused == 16) {\r\n                    this.ruleForm.statused = '规划中(订单第一次超时等待运营接单)'\r\n                }\r\n                if (json.body.statused == 32) {\r\n                    this.ruleForm.statused = '规划中(订单第二次超时等待运营主管强制指派)'\r\n                }\r\n                if (json.body.statused == 64) {\r\n                    this.ruleForm.statused = '规划中(运营接单待指派，正在处理)'\r\n                }\r\n                if (json.body.statused == 128) {\r\n                    this.ruleForm.statused = '待排课'\r\n                }\r\n                if (json.body.statused == 256) {\r\n                    this.ruleForm.statused = '已排课'\r\n                }\r\n                if (json.body.statused == 512) {\r\n                    this.ruleForm.statused = '待结课'\r\n                }\r\n                if (json.body.statused == 1024) {\r\n                    this.ruleForm.statused = '已结课'\r\n                }\r\n                if (json.body.statused == 4096) {\r\n                    this.ruleForm.statused = '已取消'\r\n                }\r\n                if (json.body.statused == 65536) {\r\n                    this.ruleForm.statused = '事故单申请中'\r\n                }\r\n                if (json.body.statused == 262144) {\r\n                    this.ruleForm.statused = '事故单更换教师'\r\n                }\r\n                this.bigClassRoom = false\r\n                this.coursesItem = JSON.parse(\r\n                    JSON.stringify(r.data.body.studCoursewareList)\r\n                )\r\n                for (var i in this.coursesItem) {\r\n                    this.coursesItem[i].checkbox = false\r\n                }\r\n                // var studCoursewareList = json.body.studCoursewareList\r\n                // var groupName = studCoursewareList.groupName\r\n                // var arr1 = []\r\n                // studCoursewareList.map(function(value, key) {\r\n                //     if (value.groupName == 'Requirement') {\r\n                //         for (i = 0; i < 1; i++) {\r\n                //             var array1 = {}\r\n                //             array1.name = value.name\r\n                //             array1.createAt = value.createAt\r\n                //             array1.url = value.url\r\n                //             array1.id = value.id\r\n                //             arr1.push(array1)\r\n                //         }\r\n                //     }\r\n                // })\r\n                // arr1.map(item => {\r\n                //     var html = \"<li data-id='\" + item.id +\r\n                //             \"'><input class='checkbox' name='tie_in[]' type='checkbox' data-name='\" + item.url +\r\n                //             \"'/><a class='view' data-name='\" + item.url + \"'>\" + item.name + '</a>' + item\r\n                //         .createAt + \"<button class='button'>删除</button></li>\"\r\n                //     $('.Requirement').append(html)\r\n                // })\r\n                // var arr2 = []\r\n                // studCoursewareList.map(function(value, key) {\r\n                //     if (value.groupName == 'Unit Guide(Syllabus)') {\r\n                //         for (i = 0; i < 1; i++) {\r\n                //             var array2 = {}\r\n                //             array2.name = value.name\r\n                //             array2.createAt = value.createAt\r\n                //             array2.url = value.url\r\n                //             array2.id = value.id\r\n                //             arr2.push(array2)\r\n                //         }\r\n                //     }\r\n                // })\r\n                // arr2.map(item => {\r\n                //     var html = \"<li data-id='\" + item.id +\r\n                //             \"'><input class='checkbox' name='tie_in[]' type='checkbox' data-name='\" + item.url +\r\n                //             \"'/><a class='view' data-name='\" + item.url + \"'>\" + item.name + '</a>' + item\r\n                //         .createAt + \"<button class='button'>删除</button></li>\"\r\n                //     $('#Unit').append(html)\r\n                // })\r\n                // var arr3 = []\r\n                // studCoursewareList.map(function(value, key) {\r\n                //     if (value.groupName == 'Lecture note') {\r\n                //         for (i = 0; i < 1; i++) {\r\n                //             var array3 = {}\r\n                //             array3.name = value.name\r\n                //             array3.createAt = value.createAt\r\n                //             array3.url = value.url\r\n                //             array3.id = value.id\r\n                //             arr3.push(array3)\r\n                //         }\r\n                //     }\r\n                // })\r\n                // arr3.map(item => {\r\n                //     var html = \"<li data-id='\" + item.id +\r\n                //             \"'><input class='checkbox' name='tie_in[]' type='checkbox' data-name='\" + item.url +\r\n                //             \"'/><a class='view' data-name='\" + item.url + \"'>\" + item.name + '</a>' + item\r\n                //         .createAt + \"<button class='button'>删除</button></li>\"\r\n                //     $('#Lecture').append(html)\r\n                // })\r\n                // var arr4 = []\r\n                // studCoursewareList.map(function(value, key) {\r\n                //     if (value.groupName == 'Sample') {\r\n                //         for (i = 0; i < 1; i++) {\r\n                //             var array4 = {}\r\n                //             array4.name = value.name\r\n                //             array4.createAt = value.createAt\r\n                //             array4.url = value.url\r\n                //             array4.id = value.id\r\n                //             arr4.push(array4)\r\n                //         }\r\n                //     }\r\n                // })\r\n                // arr4.map(item => {\r\n                //     var html = \"<li data-id='\" + item.id +\r\n                //             \"'><input class='checkbox' name='tie_in[]' type='checkbox' data-name='\" + item.url +\r\n                //             \"'/><a class='view' data-name='\" + item.url + \"'>\" + item.name + '</a>' + item\r\n                //         .createAt + \"<button class='button'>删除</button></li>\"\r\n                //     $('#Sample').append(html)\r\n                // })\r\n\r\n                // var arr5 = []\r\n                // studCoursewareList.map(function(value, key) {\r\n                //     if (value.groupName == 'Readings') {\r\n                //         for (i = 0; i < 1; i++) {\r\n                //             var array5 = {}\r\n                //             array5.name = value.name\r\n                //             array5.createAt = value.createAt\r\n                //             array5.url = value.url\r\n                //             array5.id = value.id\r\n                //             arr5.push(array5)\r\n                //         }\r\n                //     }\r\n                // })\r\n                // arr5.map(item => {\r\n                //     var html = \"<li data-id='\" + item.id +\r\n                //             \"'><input class='checkbox' name='tie_in[]' type='checkbox' data-name='\" + item.url +\r\n                //             \"'/><a class='view' data-name='\" + item.url + \"'>\" + item.name + '</a>' + item\r\n                //         .createAt + \"<button class='button'>删除</button></li>\"\r\n                //     $('#Readings').append(html)\r\n                // })\r\n                // var arr6 = []\r\n                // studCoursewareList.map(function(value, key) {\r\n                //     if (value.groupName == 'Other') {\r\n                //         for (i = 0; i < 1; i++) {\r\n                //             var array6 = {}\r\n                //             array6.name = value.name\r\n                //             array6.createAt = value.createAt\r\n                //             array6.url = value.url\r\n                //             array6.id = value.id\r\n                //             arr6.push(array6)\r\n                //         }\r\n                //     }\r\n                // })\r\n                // arr6.map(item => {\r\n                //     var html = \"<li data-id='\" + item.id +\r\n                //             \"'><input class='checkbox' name='tie_in[]' type='checkbox' data-name='\" + item.url +\r\n                //             \"'/><a class='view' data-name='\" + item.url + \"'>\" + item.name + '</a>' + item\r\n                //         .createAt + \"<button class='button'>删除</button></li>\"\r\n                //     $('#Other').append(html)\r\n                // })\r\n                // var arr7 = []\r\n                // studCoursewareList.map(function(value, key) {\r\n                //     if (value.groupName == 'Tutor Material') {\r\n                //         for (i = 0; i < 1; i++) {\r\n                //             var array7 = {}\r\n                //             array7.name = value.name\r\n                //             array7.createAt = value.createAt\r\n                //             array7.url = value.url\r\n                //             array7.id = value.id\r\n                //             arr7.push(array7)\r\n                //         }\r\n                //     }\r\n                // })\r\n                // arr7.map(item => {\r\n                //     var html = \"<li data-id='\" + item.id +\r\n                //             \"'><input class='checkbox' name='tie_in[]' type='checkbox' data-name='\" + item.url +\r\n                //             \"'/><a class='view' data-name='\" + item.url + \"'>\" + item.name + '</a>' + item\r\n                //         .createAt + \"<button class='button'>删除</button></li>\"\r\n                //     $('#Tutor').append(html)\r\n                // })\r\n                // var arr8 = []\r\n                // studCoursewareList.map(function(value, key) {\r\n                //     if (value.groupName == 'Additional') {\r\n                //         for (i = 0; i < 1; i++) {\r\n                //             var array8 = {}\r\n                //             array8.name = value.name\r\n                //             array8.createAt = value.createAt\r\n                //             array8.url = value.url\r\n                //             array8.id = value.id\r\n                //             arr8.push(array8)\r\n                //         }\r\n                //     }\r\n                // })\r\n                // arr8.map(item => {\r\n                //     var html = \"<li data-id='\" + item.id +\r\n                //             \"'><input class='checkbox' name='tie_in[]' type='checkbox' data-name='\" + item.url +\r\n                //             \"'/><a class='view' data-name='\" + item.url + \"'>\" + item.name + '</a>' + item\r\n                //         .createAt + \"<button class='button'>删除</button></li>\"\r\n                //     $('#Additional').append(html)\r\n                // })\r\n\r\n                // $('.button').click(function() {\r\n                //     var id = $(this).parent('li').attr('data-id')\r\n                //     this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n                //         confirmButtonText: '确定',\r\n                //         cancelButtonText: '取消',\r\n                //         type: 'warning'\r\n                //     }).then(() => {\r\n                //         $.ajax({\r\n                //             type: 'POST',\r\n                //             contentType: 'application/json',\r\n                //             headers: {\r\n                //                 'token': token\r\n                //             },\r\n                //             data: JSON.stringify([id]),\r\n                //             url: '' + baseURL + 'sys/seller/courseware/delete',\r\n                //             success: function(json) {\r\n                //                 this.$message({\r\n                //                     type: 'success',\r\n                //                     message: '删除成功!'\r\n                //                 })\r\n                //                 $('ul').html('')\r\n                //                 this.getclassroomdata()\r\n                //             }\r\n                //         })\r\n                //     }).catch(() => {})\r\n                // })\r\n\r\n                // $(\".view\").click(function(){\r\n                //   var name = $(this).attr(\"data-name\");\r\n                //   window.open( \"viewpdf.html?name=\"+name+\"\");\r\n                // });\r\n\r\n                // $('.view').click(function() {\r\n                //     var name = $(this).attr('data-name')\r\n                //     window.open(name)\r\n                // })\r\n            })\r\n            // $.ajax({\r\n            //     type: 'get',\r\n            //     dataType: 'json',\r\n            //     data: {\r\n            //         'token': token,\r\n            //         'page': 1,\r\n            //         'limit': 6,\r\n            //         'isBig': true\r\n            //     },\r\n            //     url: '' + baseURL + '/api/teacher/classcourse/queryClassCourseInfo?id=' + id + '',\r\n            //     success: function(json) {\r\n\r\n            //     }\r\n            // })\r\n        },\r\n        apply(row, index) {\r\n            this.mm1 = true\r\n            this.type = row.type\r\n            this.badMoney = row.badMoney\r\n            this.ruleForm.studId = row.studId\r\n            this.ruleForm.current = row.current\r\n            this.ruleForm.id = row.id\r\n            this.amount = row.badMoney\r\n            this.ruleForm1.studname = row.nickName\r\n            this.ruleForm1.amount1 = row.minMoney\r\n            this.ruleForm1.amount = row.badMoney\r\n            if (row.parentId == null) {\r\n                this.radshow = false\r\n                this.radio = '2'\r\n            } else {\r\n                this.radshow = true\r\n                this.radio = '1'\r\n            }\r\n            if (row.courseId == null) {\r\n                this.ruleForm.courseId = ' '\r\n            } else {\r\n                this.ruleForm.courseId = row.courseId\r\n            }\r\n            return\r\n        },\r\n        save1(formName) {\r\n            var self = this\r\n            if (this.radio == '1') {\r\n                this.isFromOrder = true\r\n            } else {\r\n                this.isFromOrder = false\r\n            }\r\n            this.creatst1 = true\r\n            this.creatbtn1 = '加载中'\r\n            this.$axios({\r\n                method: 'post',\r\n                url: this.$api.baseURL + '/sys/seller/order/offsetPaymentDemand',\r\n                data: {\r\n                    'studId': this.ruleForm.studId,\r\n                    'currency': this.ruleForm.current,\r\n                    'payMoney': this.ruleForm1.amount,\r\n                    'sysPaymentDemandId': this.ruleForm.id,\r\n                    'isFromOrder': this.isFromOrder\r\n                }\r\n            }).then(r => {\r\n                var json = r.data\r\n                if (json.status == 200) {\r\n                    this.creatmodel1 = false\r\n                    this.creatst1 = false\r\n                    this.creatbtn1 = '确 定'\r\n                    if (json.body.needMoney == 0) {\r\n                        self.$message({\r\n                            message: '账单支付成功',\r\n                            type: 'success'\r\n                        })\r\n                        this.getclassroomdata()\r\n                        this.mm1 = false\r\n                    } else {\r\n                        this.mm1 = false\r\n                        this.ruleForm.amount = json.body.needMoney\r\n                        this.ruleForm.amount1 = this.ruleForm1.amount\r\n                        this.ruleForm.studname = this.ruleForm1.studname\r\n                        this.mm = true\r\n                    }\r\n                }\r\n                if (json.status == 400) {\r\n                    this.$message({\r\n                        message: json.body.msg,\r\n                        type: 'warning'\r\n                    })\r\n                    this.creatst1 = false\r\n                    this.creatbtn1 = '确 定'\r\n                }\r\n            })\r\n        },\r\n        submitUpload1() {\r\n            if (this.ruleForm.remark == undefined) {\r\n                this.ruleForm.remark = ' '\r\n            }\r\n            this.formDate = new FormData()\r\n            this.$refs.upload.submit()\r\n            this.formDate.append('current', this.ruleForm.current)\r\n            this.formDate.append('studId', this.ruleForm.studId)\r\n            this.formDate.append('amount', this.ruleForm.amount)\r\n            this.formDate.append('remark', this.ruleForm.remark)\r\n            this.formDate.append('courseId', this.ruleForm.courseId)\r\n            const config = {\r\n                headers: {\r\n                    processData: false,\r\n                    contentType: false,\r\n                    mimeType: 'multipart/form-data',\r\n                    token: getLocal('teactoken')\r\n                }\r\n            }\r\n            this.$axios.post(this.$api.baseURL + 'sys/seller/order/evidenceThumbSave', this.formDate, config).then(res => {\r\n                if (res.data.status == 200) {\r\n                    this.save1()\r\n                    this.$message({\r\n                        message: '账单支付成功',\r\n                        type: 'success'\r\n                    })\r\n                    this.mm = false\r\n                    this.getclassroomdata()\r\n                    this.fileList = []\r\n                    this.ruleForm.remark = ''\r\n                    this.b1 = false\r\n                    this.b2 = '确 定'\r\n                }\r\n                if (res.data.status == 400) {\r\n                    if (this.$refs.ruleForm.model.amount != '') {\r\n                        this.$message({\r\n                            message: res.data.body.msg,\r\n                            type: 'warning'\r\n                        })\r\n                    }\r\n                    this.b1 = false\r\n                    this.b2 = '确 定'\r\n                }\r\n            }).catch(res => {\r\n                this.$message({\r\n                    message: res.data.body.msg,\r\n                    type: 'warning'\r\n                })\r\n            })\r\n        },\r\n        save(formName) {\r\n            var badMoney = Number(this.badMoney)\r\n            var amount = Number(this.ruleForm.amount)\r\n            if (this.type == 1) {\r\n                if (amount > badMoney) {\r\n                    this.red = '课程预付 可以少不可以多'\r\n                    return\r\n                }\r\n            }\r\n            if (this.type == 2) {\r\n                if (amount < badMoney) {\r\n                    this.red = '欠费账单 可以多不可以少'\r\n                    return\r\n                }\r\n            }\r\n            if (this.fileListnum == 0) {\r\n                this.$message({\r\n                    message: '请选择图片',\r\n                    type: 'warning'\r\n                })\r\n                return\r\n            }\r\n            var self = this\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    this.b1 = true\r\n                    this.b2 = '加载中'\r\n                    this.submitUpload1()\r\n                } else {\r\n                    this.$message({\r\n                        message: '请完善信息',\r\n                        type: 'warning'\r\n                    })\r\n                }\r\n            })\r\n        },\r\n        handlePreview1(file) {\r\n            console.log(file)\r\n        },\r\n        success1(response, file, fileList) {\r\n            console.log(response)\r\n        },\r\n        onerror1(response, file, fileList) {\r\n            this.$message({\r\n                message: response.body.msg,\r\n                type: 'warning'\r\n            })\r\n        },\r\n        change1(file, fileList) {\r\n            this.fileListnum = fileList.length\r\n            // console.log(this.fileListnum)\r\n            // if (fileList.length == 1) {\r\n\r\n            // }\r\n        },\r\n        uploadFile1(file) {\r\n            this.formDate = new FormData()\r\n            for (var i = 0; i < this.fileListnum; i++) {\r\n                this.formDate.append('file' + i, file.file)\r\n            }\r\n        },\r\n        handleRemove1(file, fileList) {\r\n            this.fileListnum = fileList.length\r\n            // console.log(this.fileListnum)\r\n            // if (fileList.length == 1) {\r\n\r\n            // }\r\n        },\r\n        deleteClasseoom(row, index) {\r\n            // getUrlStr = function(name) {\r\n            //     var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)')\r\n            //     var r = window.location.search.substr(1).match(reg)\r\n            //     if (r != null) return unescape(r[2])\r\n            //     return null\r\n            // }\r\n            var id = this.$route.query.id\r\n            this.$confirm('此操作将结束该班课, 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                this.$axios({\r\n                    method: 'post',\r\n                    url: this.$api.baseURL + '/sys/seller/classcourse/finishedClassCourse?courseId=' + id + '',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    }\r\n                }).then(r => {\r\n                    if (r.data.status == 200) {\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: r.data.body.msg\r\n                        })\r\n                    }\r\n\r\n                    if (r.data.status == 400) {\r\n                        this.$message({\r\n                            type: 'warning',\r\n                            message: r.data.body.msg\r\n                        })\r\n                    }\r\n                })\r\n                // $.ajax({\r\n                //     type: 'POST',\r\n                //     contentType: 'application/json',\r\n                //     headers: {\r\n                //         'token': token\r\n                //     },\r\n                //     url: '' + baseURL + '/sys/seller/classcourse/finishedClassCourse?courseId=' + id + '',\r\n                //     success: function(json) {\r\n                //         if (json.status == 200) {\r\n                //             this.$message({\r\n                //                 type: 'success',\r\n                //                 message: json.body.msg\r\n                //             })\r\n                //         }\r\n\r\n                //         if (json.status == 400) {\r\n                //             this.$message({\r\n                //                 type: 'warning',\r\n                //                 message: json.body.msg\r\n                //             })\r\n                //         }\r\n                //     }\r\n                // })\r\n            }).catch(() => {})\r\n        },\r\n        seebill(row, index) {\r\n            // getUrlStr = function(name) {\r\n            //     var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)')\r\n            //     var r = window.location.search.substr(1).match(reg)\r\n            //     if (r != null) return unescape(r[2])\r\n            //     return null\r\n            // }\r\n            var id = this.$route.query.id\r\n            window.location.href = 'editClassroom.html?id=' + id + ''\r\n        },\r\n        addClasseoom(row, index) {\r\n            // getUrlStr = function(name) {\r\n            //     var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)')\r\n            //     var r = window.location.search.substr(1).match(reg)\r\n            //     if (r != null) return unescape(r[2])\r\n            //     return null\r\n            // }\r\n            var id = this.$route.query.id\r\n            window.location.href = 'addClassroom.html?id=' + id + ''\r\n        },\r\n        change_teacher(row, index) {\r\n            // getUrlStr = function(name) {\r\n            //     var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)')\r\n            //     var r = window.location.search.substr(1).match(reg)\r\n            //     if (r != null) return unescape(r[2])\r\n            //     return null\r\n            // }\r\n            var id = this.$route.query.id\r\n            this.$confirm('是否执行此操作?', '提示', {\r\n                    confirmButtonText: '确定',\r\n                    cancelButtonText: '取消',\r\n                    type: 'warning'\r\n                })\r\n                .then(_ => {\r\n                    this.$axios({\r\n                        url: this.$api.baseURL + 'sys/seller/order/applyAccidentOrder',\r\n                        method: 'post',\r\n                        data: {\r\n                            'courseId': id\r\n                        }\r\n                    }).then(r => {\r\n                        if (r.data.status == '200') {\r\n                            this.$message({\r\n                                message: r.data.body.msg,\r\n                                type: 'success'\r\n                            })\r\n                        }\r\n                        if (r.data.status == 400) {\r\n                            this.$message({\r\n                                message: r.data.body.msg,\r\n                                type: 'warning'\r\n                            })\r\n                        }\r\n                    })\r\n                    // $.ajax({\r\n                    //     type: 'POST',\r\n                    //     dataType: 'json',\r\n                    //     data: {\r\n                    //         'token': token,\r\n                    //         'courseId': id\r\n                    //     },\r\n                    //     url: '' + baseURL + 'sys/seller/order/applyAccidentOrder',\r\n                    //     success: function(json) {\r\n                    //         if (json.status == '200') {\r\n                    //             this.$message({\r\n                    //                 message: json.body.msg,\r\n                    //                 type: 'success'\r\n                    //             })\r\n                    //         }\r\n                    //         if (json.status == 400) {\r\n                    //             this.$message({\r\n                    //                 message: json.body.msg,\r\n                    //                 type: 'warning'\r\n                    //             })\r\n                    //         }\r\n                    //     }\r\n                    // })\r\n                }).catch(() => {})\r\n        },\r\n        getperson() {\r\n            this.$axios({\r\n                url: this.$api.baseURL + 'sys/seller/classcourse/queryStudByClassroomId',\r\n                params: {\r\n                    'page': this.personpage,\r\n                    'limit': this.personlimit,\r\n                    'classroomId': this.personid\r\n                }\r\n\r\n            }).then(r => {\r\n                this.persondata = r.data.body.list\r\n                this.total = r.data.body.totalCount\r\n                this.pageSize = r.data.body.totalCount\r\n                this.currentPage = r.data.body.currPage\r\n            })\r\n            // $.ajax({\r\n            //     type: 'get',\r\n            //     dataType: 'json',\r\n            //     data: {\r\n            //         'token': token,\r\n            //         'page': this.personpage,\r\n            //         'limit': this.personlimit,\r\n            //         'classroomId': this.personid\r\n            //     },\r\n            //     url: '' + baseURL + 'sys/seller/classcourse/queryStudByClassroomId',\r\n            //     success: function(json) {\r\n            //         this.persondata = json.body.list\r\n            //         this.total = json.body.totalCount\r\n            //         this.pageSize = json.body.totalCount\r\n            //         this.currentPage = json.body.currPage\r\n            //     }\r\n            // })\r\n        },\r\n        person(row, index) {\r\n            this.personid = row.id\r\n            this.getperson()\r\n            this.personmodel = true\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.personpage = val\r\n            this.getperson()\r\n        },\r\n        handleSizeChange(val) {\r\n            this.personlimit = val\r\n            this.getperson()\r\n            this.handleCurrentChange(this.currentPage)\r\n        },\r\n        editOrder(row, index) {\r\n            window.location.href = 'editClassroomOrder.html?id=' + row.courseId + ''\r\n        },\r\n        seedetail(row, index) {\r\n            const Logistics = this.$router.resolve({\r\n                path: `/sellerDetail`,\r\n                query: { id: row.courseId }\r\n            })\r\n            window.open(Logistics.href)\r\n            // window.location.href = 'seller_detail.html?id=' + row.courseId + ''\r\n        }\r\n    }\r\n}\r\n\r\n",null]}
{"remainingRequest":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/detail/seller_detailWy.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/detail/seller_detailWy.vue","mtime":1561620362000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    data() {\r\n        return {\r\n            sellerDetailWy: false,\r\n            dropboxList: [],\r\n            wyactiveNames: null,\r\n            wylog: null,\r\n            wyassociated: null,\r\n            wyorder: {\r\n                upload: []\r\n            },\r\n            iswy: false,\r\n            wyid: null,\r\n            typeOrder: true,\r\n            cailiaofei: true,\r\n\r\n            history: '',\r\n            dialogVisible: false,\r\n            checked: false,\r\n            courses: '',\r\n            urls: [],\r\n            id: '',\r\n            btnstatus: false,\r\n            classroomdata: [],\r\n            studCoursewareList: [],\r\n            filelist: [],\r\n            ruleForm: {\r\n                course: ''\r\n            },\r\n            ruleForm1: {\r\n                username: '',\r\n                nickname: '',\r\n                sellerDemandDesc: '',\r\n                hourlyWage: ''\r\n            },\r\n            ruleForm2: {\r\n                courseCode: '',\r\n                courseName: '',\r\n                type: ''\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        this.getclassroomdata()\r\n        this.coursedata()\r\n    },\r\n    methods: {\r\n        downDropbox: function(path, name) {\r\n            window.open(path)\r\n        },\r\n\r\n        down(url, fileName) {\r\n            var xhr = new XMLHttpRequest()\r\n            xhr.open('GET', url, true)\r\n            xhr.responseType = 'blob'\r\n            xhr.onload = function() {\r\n                var blob = this.response\r\n                if (window.navigator.msSaveOrOpenBlob) {\r\n                    navigator.msSaveBlob(blob, fileName)\r\n                } else {\r\n                    var link = document.createElement('a')\r\n                    link.style.display = 'none'\r\n                    link.href = window.URL.createObjectURL(blob)\r\n                    link.download = fileName\r\n                    link.click()\r\n                    window.URL.revokeObjectURL(link.href)\r\n                }\r\n            }\r\n            xhr.ontimeout = function(e) {}\r\n            xhr.onerror = function(e) {}\r\n            xhr.send()\r\n        },\r\n        revise(row, index) {\r\n            this.$axios({\r\n                url:\r\n                    this.$api.baseURL +\r\n                    'api/teacher/order/getClassroomConversation',\r\n                params: {\r\n                    classroomId: row.id\r\n                }\r\n            }).then(r => {\r\n                this.history = []\r\n                if (r.data.status == 400) {\r\n                    this.dialogVisible = true\r\n                    return\r\n                } else {\r\n                    this.dialogVisible = true\r\n                    function timestampToTime(timestamp) {\r\n                        var date = new Date(timestamp)\r\n                        var Y = date.getFullYear() + '-'\r\n                        var M =\r\n                            (date.getMonth() + 1 < 10\r\n                                ? '0' + (date.getMonth() + 1)\r\n                                : date.getMonth() + 1) + '-'\r\n                        var D = date.getDate() + ' '\r\n                        var h = date.getHours() + ':'\r\n                        var m = date.getMinutes() + ':'\r\n                        var s = date.getSeconds()\r\n                        return Y + M + D + h + m + s\r\n                    }\r\n                    var ess = []\r\n                    for (var i = 0; i < r.data.body.list.length; i++) {\r\n                        var es = []\r\n                        var joinTime = timestampToTime(\r\n                            r.data.body.list[i].joinTime\r\n                        )\r\n                        var leaveTime = timestampToTime(\r\n                            r.data.body.list[i].leaveTime\r\n                        )\r\n                        var userroleid = r.data.body.list[i].userroleid\r\n                        var suerrole = ''\r\n                        if (userroleid == '0') {\r\n                            suerrole = '讲师'\r\n                        } else if (userroleid == '1') {\r\n                            suerrole = '助教'\r\n                        } else if (userroleid == 2) {\r\n                            suerrole = '学员'\r\n                        } else if (userroleid == '3') {\r\n                            suerrole = '直播用户'\r\n                        } else {\r\n                            suerrole = '巡检员'\r\n                        }\r\n                        var m = r.data.body.list[i].duration\r\n                        var duration = m / 60\r\n                        var durations\r\n                        durations = duration.toFixed(2)\r\n                        es.nickname = r.data.body.list[i].nickname\r\n                        es.joinTime = joinTime\r\n                        es.suerrole = suerrole\r\n                        es.duration = durations\r\n                        es.leaveTime = leaveTime\r\n                        ess.push(es)\r\n                    }\r\n                    this.history = ess\r\n                    console.log(this.history)\r\n                }\r\n            })\r\n\r\n            this.dialogVisible = true\r\n        },\r\n        success(response, file, fileList) {\r\n            if (response.status == 200) {\r\n                this.$message({\r\n                    message: '上传文件成功',\r\n                    type: 'success'\r\n                })\r\n                this.fileList = []\r\n                // $('.ul').empty()\r\n                this.getclassroomdata()\r\n            }\r\n            if (response.status == 400) {\r\n                this.$message({\r\n                    message: response.body.msg,\r\n                    type: 'warning'\r\n                })\r\n                this.fileList = []\r\n            }\r\n        },\r\n        onerror(response, file, fileList) {\r\n            this.$message({\r\n                message: response.body.msg,\r\n                type: 'warning'\r\n            })\r\n        },\r\n        check(val) {\r\n            if (val == true) {\r\n                $('.checkbox').prop('checked', true)\r\n            } else {\r\n                $('.checkbox').prop('checked', false)\r\n            }\r\n        },\r\n        coursedata() {\r\n            this.$axios({\r\n                url: this.$api.baseURL + 'api/teacher/courseware/groupList',\r\n                params: {\r\n                    page: 1,\r\n                    limit: 1000\r\n                }\r\n            }).then(r => {\r\n                if (r.data.status == 200) {\r\n                    var lists = []\r\n                    r.data.body.list.forEach(function(element) {\r\n                        var list = {}\r\n                        list.groupName = element.groupName\r\n                        list.name = element.groupName.split(' ')[0]\r\n                        list.id = element.id\r\n                        lists.push(list)\r\n                    })\r\n                    this.courses = lists\r\n                }\r\n            })\r\n        },\r\n        change_course(courseid) {\r\n            this.data.groupId = courseid\r\n        },\r\n        downFile(url) {\r\n            window.open(url)\r\n        },\r\n        getclassroomdata: function() {\r\n            // return null\r\n            // }\r\n            var ids = this.$route.query.id\r\n\r\n            this.wyid = this.$route.query.wyid\r\n\r\n            this.$axios({\r\n                url:\r\n                    this.$api.baseURL +\r\n                    'api/teacher/order/queryWyardOrderInfo?courseId=' +\r\n                    ids\r\n            }).then(r => {\r\n                this.dropboxList = r.data.data.order.completed_work\r\n                this.wyorder = r.data.data.order\r\n                this.wyassociated = r.data.data.associated\r\n                this.wylog = r.data.data.log\r\n                this.wyactiveNames = r.data.data.order.activeNames\r\n            })\r\n            this.$axios({\r\n                url:\r\n                    this.$api.baseURL + 'api/teacher/order/getCourseObject?id=' + ids + '',\r\n                params: {\r\n                    page: 1,\r\n                    limit: 6,\r\n                    exceptionType: ''\r\n                }\r\n            }).then(r => {\r\n                var json = r.data\r\n                if (json.body.studPurchaseOrder.type == '0') {\r\n                    this.cailiaofei = false\r\n                }\r\n                this.ruleForm1.hourlyWage = json.body.hourlyWage\r\n                this.classroomdata = json.body.classroomList\r\n                this.studCoursewareList = json.body.studCoursewareList\r\n                this.studdate = json.body.studUser\r\n                this.filelist = json.body.studCoursewareList\r\n                this.ruleForm1.orderNo = json.body.orderNo\r\n                this.ruleForm1.remark = json.body.remark\r\n                this.ruleForm1.scheduledTime =\r\n                        json.body.studPurchaseOrder.scheduledTime\r\n                this.ruleForm1.allSchooltime = json.body.allSchooltime\r\n                this.ruleForm1.totalPrice =\r\n                        json.body.studPurchaseOrder.totalPrice +\r\n                        ' ' +\r\n                        json.body.studPurchaseOrder.currency\r\n                this.ruleForm1.prepayment =\r\n                        json.body.studPurchaseOrder.prepayment +\r\n                        ' ' +\r\n                        json.body.studPurchaseOrder.currency\r\n                this.ruleForm1.prices1 =\r\n                        Number(json.body.teacG) + Number(json.body.teacPreG)\r\n                this.ruleForm1.prices2 =\r\n                        Number(json.body.teacOtg) +\r\n                        Number(json.body.teacPreOtg)\r\n                this.ruleForm1.sellerDemandDesc =\r\n                        json.body.studPurchaseOrder.sellerDemandDesc\r\n                this.ruleForm2.spareTime =\r\n                        json.body.studPurchaseOrder.spareTime\r\n                if (this.ruleForm2.spareTime != null) {\r\n                    var spareTime = json.body.studPurchaseOrder.spareTime.split(\r\n                        '|'\r\n                    )\r\n                    var one = spareTime[0]\r\n                    var ones = one.split(',')\r\n                    this.ruleForm2.am1 = ones[0]\r\n                    this.ruleForm2.bm1 = ones[1]\r\n                    this.ruleForm2.pm1 = ones[2]\r\n                    var two = spareTime[1]\r\n                    var twos = two.split(',')\r\n                    this.ruleForm2.am2 = twos[0]\r\n                    this.ruleForm2.bm2 = twos[1]\r\n                    this.ruleForm2.pm2 = twos[2]\r\n                    var three = spareTime[2]\r\n                    var threes = three.split(',')\r\n                    this.ruleForm2.am3 = threes[0]\r\n                    this.ruleForm2.bm3 = threes[1]\r\n                    this.ruleForm2.pm3 = threes[2]\r\n                    var four = spareTime[3]\r\n                    var fours = four.split(',')\r\n                    this.ruleForm2.am4 = fours[0]\r\n                    this.ruleForm2.bm4 = fours[1]\r\n                    this.ruleForm2.pm4 = fours[2]\r\n                    var five = spareTime[4]\r\n                    var fives = five.split(',')\r\n                    this.ruleForm2.am5 = fives[0]\r\n                    this.ruleForm2.bm5 = fives[1]\r\n                    this.ruleForm2.pm5 = fives[2]\r\n                    var six = spareTime[5]\r\n                    var sixs = six.split(',')\r\n                    this.ruleForm2.am6 = sixs[0]\r\n                    this.ruleForm2.bm6 = sixs[1]\r\n                    this.ruleForm2.pm6 = sixs[2]\r\n                    var seven = spareTime[6]\r\n                    var sevens = seven.split(',')\r\n                    this.ruleForm2.am7 = sevens[0]\r\n                    this.ruleForm2.bm7 = sevens[1]\r\n                    this.ruleForm2.pm7 = sevens[2]\r\n                }\r\n                if (json.body.statused == 1) {\r\n                    this.ruleForm1.statused = '未处理（无任何销售接单）'\r\n                }\r\n                if (json.body.statused == 2) {\r\n                    this.ruleForm1.statused = '待审核'\r\n                }\r\n                if (json.body.statused == 4) {\r\n                    this.ruleForm1.statused = '待确定'\r\n                }\r\n                if (json.body.statused == 8) {\r\n                    this.ruleForm1.statused = '待规划（等待教师/运营接单）'\r\n                }\r\n                if (json.body.statused == 16) {\r\n                    this.ruleForm1.statused =\r\n                            '规划中(订单第一次超时等待运营接单)'\r\n                }\r\n                if (json.body.statused == 32) {\r\n                    this.ruleForm1.statused =\r\n                            '规划中(订单第二次超时等待运营主管强制指派)'\r\n                }\r\n                if (json.body.statused == 64) {\r\n                    this.ruleForm1.statused =\r\n                            '规划中(运营接单待指派，正在处理)'\r\n                }\r\n                if (json.body.statused == 128) {\r\n                    this.ruleForm1.statused = '待排课'\r\n                }\r\n                if (json.body.statused == 256) {\r\n                    this.ruleForm1.statused = '已排课'\r\n                }\r\n                if (json.body.statused == 512) {\r\n                    this.ruleForm1.statused = '申请结课中'\r\n                }\r\n                if (json.body.statused == 1024) {\r\n                    this.ruleForm1.statused = '已结课'\r\n                }\r\n                if (json.body.statused == 2048) {\r\n                    this.ruleForm1.statused = '已强制结课'\r\n                }\r\n                if (json.body.statused == 4096) {\r\n                    this.ruleForm1.statused = '已取消'\r\n                }\r\n                if (json.body.statused == 8192) {\r\n                    this.ruleForm1.statused = '坏单申请中'\r\n                }\r\n                if (json.body.statused == 16384) {\r\n                    this.ruleForm1.statused = '订单作废'\r\n                }\r\n                if (json.body.statused == 32768) {\r\n                    this.ruleForm1.statused = '销售被更换'\r\n                }\r\n                if (json.body.statused == 65536) {\r\n                    this.ruleForm1.statused = '事故单申请中'\r\n                }\r\n                if (json.body.statused == 131072) {\r\n                    this.ruleForm1.statused = '事故单已处理'\r\n                }\r\n                if (json.body.statused == 262144) {\r\n                    this.ruleForm1.statused = '事故单更换教师'\r\n                }\r\n                this.ruleForm1.username = json.body.sysSeller.username\r\n                this.ruleForm1.nickname = json.body.sysUserEntity.username\r\n                this.ruleForm1.nickname1 = json.body.teacUser.username\r\n                this.ruleForm1.teacFixedPrice = json.body.teacFixedPrice\r\n\r\n                this.ruleForm2.courseName =\r\n                        json.body.studPurchaseOrder.courseName\r\n                this.ruleForm2.courseCode =\r\n                        json.body.studPurchaseOrder.courseCode\r\n                if (json.body.studPurchaseOrder.type == 0) {\r\n                    this.ruleForm2.type = '定制辅导'\r\n                }\r\n                if (json.body.studPurchaseOrder.type == 1) {\r\n                    this.ruleForm2.type = '考前突击'\r\n                }\r\n                if (json.body.studPurchaseOrder.type == 2) {\r\n                    this.ruleForm2.type = '包课辅导'\r\n                }\r\n                if (json.body.studPurchaseOrder.type == 4) {\r\n                    this.ruleForm2.type = '论文辅导'\r\n                }\r\n                if (json.body.studPurchaseOrder.type == 32) {\r\n                    this.ruleForm2.type = '特殊订单'\r\n                }\r\n                this.ruleForm.nickname = json.body.studUser.nickName\r\n                this.ruleForm.schoolName = json.body.sysUniversity.name\r\n                this.ruleForm.temCourseName =\r\n                        json.body.sysProfessionalCourses.chineseName\r\n                this.ruleForm.levelName = json.body.studUser.eduName\r\n                this.ruleForm.schoolYear =\r\n                        json.body.studPurchaseOrder.schoolYear\r\n                this.ruleForm.endCourseTime =\r\n                        json.body.studPurchaseOrder.endCourseTime\r\n                this.ruleForm.examTime = json.body.studPurchaseOrder.examTime\r\n                this.ruleForm.schoolAccount =\r\n                        json.body.studPurchaseOrder.schoolAccount\r\n                this.ruleForm.schoolPws =\r\n                        json.body.studPurchaseOrder.schoolPws\r\n            })\r\n        }\r\n    }\r\n}\r\n",null]}
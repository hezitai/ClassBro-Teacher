{"remainingRequest":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/myorders/onCourse.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/myorders/onCourse.vue","mtime":1596184843592},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { getLocal } from '@/utils/auth'\r\nexport default {\r\n    data() {\r\n        return {\r\n            onCourseLoading: false,\r\n            browser: '',\r\n            tableDataBegin: [],\r\n            tableDataName: '',\r\n            tableDataEnd: [],\r\n            currentPage: 0,\r\n            pageSize: 0,\r\n            modal: false,\r\n            modal_time: false,\r\n            total: 0,\r\n            limit: 15,\r\n            idss: [],\r\n            courseId: '',\r\n            val: 1,\r\n            page: '',\r\n            startTime: '',\r\n            endTime: '',\r\n            tk: '',\r\n            ruleForm: {\r\n                title: '',\r\n                course_time: '',\r\n                description: ''\r\n            },\r\n            rules: {\r\n                title: [{\r\n                    required: true,\r\n                    message: '请填写课程标题',\r\n                    trigger: 'blur'\r\n                }],\r\n                course_time: [{\r\n                    required: true,\r\n                    message: '请选择排课时间',\r\n                    trigger: 'change'\r\n                }],\r\n                description: [{\r\n                    required: true,\r\n                    message: '请填写课程详情',\r\n                    trigger: 'blur'\r\n                }]\r\n            }\r\n        }\r\n    },\r\n    multipleSelection: [],\r\n    mounted() {\r\n        this.getTableData()\r\n    },\r\n    methods: {\r\n        search: function () {\r\n            this.getTableData()\r\n        },\r\n        getTableData: function () {\r\n            this.onCourseLoading = true\r\n            this.$axios({\r\n                url: this.$api.baseURL + 'api/teacher/classRoom/list',\r\n                params: {\r\n                    'page': this.val,\r\n                    'limit': this.limit,\r\n                    'statusedArr': '1;2;4;32',\r\n                    'key': this.tableDataName\r\n                }\r\n            }).then(r => {\r\n                this.onCourseLoading = false\r\n                this.tableDataEnd = r.data.body.list\r\n                this.total = r.data.body.totalCount\r\n                this.pageSize = r.data.body.totalCount\r\n                this.currentPage = r.data.body.currPage\r\n            }).catch(r => {\r\n                this.onCourseLoading = false\r\n            })\r\n            // var self = this\r\n            // $.ajax({\r\n            //     type: 'get',\r\n            //     dataType: 'json',\r\n            //     data: {\r\n            //         'token': token,\r\n            //         'page': this.val,\r\n            //         'limit': this.limit,\r\n            //         'statusedArr': '1;2;4;32',\r\n            //         'key': this.tableDataName\r\n            //     },\r\n            //     url: '' + baseURL + 'api/teacher/classRoom/list',\r\n            //     success: function(json) {\r\n            //         self.tableDataEnd = json.body.list\r\n            //         self.total = json.body.totalCount\r\n            //         self.pageSize = json.body.totalCount\r\n            //         self.currentPage = json.body.currPage\r\n            //     }\r\n            // })\r\n        },\r\n        apply(row, index) {\r\n            this.modal = true\r\n            this.ruleForm = this.$refs.formName\r\n            this.courseId = row.id\r\n            this.cdId = row.cdId\r\n            this.startTime = row.startTime\r\n            this.endTime = row.endTime\r\n            this.description = row.description\r\n            this.time = [row.startTime, row.endTime]\r\n            this.ruleForm = {\r\n                title: row.name,\r\n                description: row.description,\r\n                course_time: [row.startTime, row.endTime]\r\n            }\r\n        },\r\n        cancel(row, index) {\r\n            this.$confirm('是否要取消排课?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            })\r\n                .then(_ => {\r\n                    this.$axios({\r\n                        url: this.$api.baseURL + 'api/teacher/order/cancelClassroom',\r\n                        method: 'post',\r\n                        data: {\r\n                            'classroomId': row.id\r\n                        }\r\n                    }).then(r => {\r\n                        if (r.data.status == 200) {\r\n                            this.$message({\r\n                                message: r.data.body.msg,\r\n                                type: 'success'\r\n                            })\r\n                            this.getTableData()\r\n                        }\r\n                        if (r.data.status == 400) {\r\n                            this.$message({\r\n                                message: r.data.body.msg,\r\n                                type: 'warning'\r\n                            })\r\n                            this.getTableData()\r\n                        }\r\n                    }).catch(er => {\r\n\r\n                    })\r\n                    // $.ajax({\r\n                    //     type: 'post',\r\n                    //     dataType: 'json',\r\n                    //     data: {\r\n                    //         'token': token,\r\n                    //         'classroomId': row.id\r\n                    //     },\r\n                    //     url: '' + baseURL + 'api/teacher/order/cancelClassroom',\r\n                    //     success: function(json) {\r\n                    //         if (json.status == 200) {\r\n                    //             vm.$message({\r\n                    //                 message: json.body.msg,\r\n                    //                 type: 'success'\r\n                    //             })\r\n                    //             vm.getTableData()\r\n                    //         }\r\n                    //         if (json.status == 400) {\r\n                    //             vm.$message({\r\n                    //                 message: json.body.msg,\r\n                    //                 type: 'warning'\r\n                    //             })\r\n                    //             vm.getTableData()\r\n                    //         }\r\n                    //     }\r\n                    // })\r\n                })\r\n                .catch(_ => { })\r\n        },\r\n        sees(row, index) {\r\n            // if (row.spoType == 64) {\r\n            //     window.open('bigClassroomInfo.html?id=' + row.cdId + '')\r\n            // } else if (row.scTypeed == 4) {\r\n            //     window.open('seller_detail-wy.html?id=' + row.cdId + '&wyid=' + row.offCourseName + '&iswy=true')\r\n            // } else {\r\n            //     window.open('seller_detail.html?id=' + row.cdId + '')\r\n            // }\r\n            if (row.spoType === 64) {\r\n                const Logistics2 = this.$router.resolve({\r\n                    path: `/bigClassRoom`,\r\n                    query: { id: row.cdId, parentId: null }\r\n                })\r\n                window.open(Logistics2.href)\r\n            } else if (row.courseType === 4) {\r\n                const Logistics1 = this.$router.resolve({\r\n                    path: `/sellerDetailWy`,\r\n                    query: { id: row.cdId, wyid: row.offCourseName }\r\n                })\r\n                window.open(Logistics1.href)\r\n            } else {\r\n                const Logistics = this.$router.resolve({\r\n                    path: `/sellerDetail`,\r\n                    query: { id: row.cdId }\r\n                })\r\n                window.open(Logistics.href)\r\n            }\r\n        },\r\n        get_studjoinurl(row, index) {\r\n            alert(row.studentJoinUrl)\r\n        },\r\n        // compile(code) {\r\n        //     var code = getLocal('teactoken')\r\n        //     var c = String.fromCharCode(code.charCodeAt(0) + code.length)\r\n        //     for (var i = 1; i < code.length; i++) {\r\n        //         c += String.fromCharCode(code.charCodeAt(i) + code.charCodeAt(i - 1))\r\n        //     }\r\n        //     this.tk = escape(c)\r\n        // },\r\n        in_classroom(row, index) {\r\n            var code = window.localStorage.getItem('teactoken')\r\n            var c = String.fromCharCode(code.charCodeAt(0) + code.length)\r\n            for (var i = 1; i < code.length; i++) {\r\n                c += String.fromCharCode(code.charCodeAt(i) + code.charCodeAt(i - 1))\r\n            }\r\n            var tk = escape(c)\r\n            window.open(this.$api.url + 'static-resource/tkcloud/giveLessons.html?classroomId=' + row.id +\r\n                '&iden=teac&tk=' + tk + '')\r\n            // var isOpera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\r\n            //     var isFirefox = typeof InstallTrigger !== 'undefined';\r\n            //     var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!window['safari'] || safari.pushNotification);\r\n            //     var isIE = /*@cc_on!@*/false || !!document.documentMode;\r\n            //     var isEdge = !isIE && !!window.StyleMedia;\r\n            //     var isChrome = !!window.chrome && !!window.chrome.webstore;\r\n            //     var isBlink = (isChrome || isOpera) && !!window.CSS;\r\n            //     console.log(isChrome);\r\n            //     if(isChrome == true){\r\n            //       window.open(row.teacherJoinUrl);\r\n            //     }else{\r\n            //       alert(\"您当前使用的不是谷歌浏览器,点击下载浏览器\")\r\n            //       window.open(\"https://sm.myapp.com/original/Browser/70.0.3538.67_chrome_installer_x64.exe\");\r\n            //     }\r\n        },\r\n        submitForm(formName) {\r\n            // var self = this\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    this.$axios({\r\n                        url: this.$api.baseURL + '/api/teacher/order/updateClassroom',\r\n                        data: JSON.stringify({\r\n                            id: this.courseId,\r\n                            name: this.$refs.ruleForm.model.title,\r\n                            cdId: this.cdId,\r\n                            startTime: this.$refs.ruleForm.model.course_time[0],\r\n                            endTime: this.$refs.ruleForm.model.course_time[1],\r\n                            description: this.$refs.ruleForm.model.description\r\n                        }),\r\n                        method: 'post',\r\n                        headers: {\r\n                            'Content-Type': 'application/json'\r\n                        }\r\n                    }).then(r => {\r\n                        if (r.data.status == 200) {\r\n                            this.$message({\r\n                                message: r.data.body.msg,\r\n                                type: 'success'\r\n                            })\r\n                            this.modal = false\r\n                            this.getTableData()\r\n                        }\r\n                        if (r.data.status == 400) {\r\n                            this.$message({\r\n                                message: r.data.body.msg,\r\n                                type: 'warning'\r\n                            })\r\n                            this.modal = false\r\n                            this.getTableData()\r\n                        }\r\n                    }).catch(er => {\r\n\r\n                    })\r\n                    // $.ajax({\r\n                    //     type: 'post',\r\n                    //     contentType: 'application/json',\r\n                    //     headers: {\r\n                    //         'token': token\r\n                    //     },\r\n                    //     data: JSON.stringify({\r\n                    //         id: vm.courseId,\r\n                    //         name: this.$refs.ruleForm.model.title,\r\n                    //         cdId: vm.cdId,\r\n                    //         startTime: this.$refs.ruleForm.model.course_time[0],\r\n                    //         endTime: this.$refs.ruleForm.model.course_time[1],\r\n                    //         description: this.$refs.ruleForm.model.description\r\n                    //     }),\r\n                    //     url: '' + baseURL + '/api/teacher/order/updateClassroom',\r\n                    //     success: function(json) {\r\n                    //         if (json.status == 200) {\r\n                    //             vm.$message({\r\n                    //                 message: json.body.msg,\r\n                    //                 type: 'success'\r\n                    //             })\r\n                    //             vm.modal = false\r\n                    //             vm.getTableData()\r\n                    //         }\r\n                    //         if (json.status == 400) {\r\n                    //             vm.$message({\r\n                    //                 message: json.body.msg,\r\n                    //                 type: 'warning'\r\n                    //             })\r\n                    //             vm.modal = false\r\n                    //             this.getTableData()\r\n                    //         }\r\n                    //     }\r\n                    // })\r\n                } else {\r\n                    console.log('error submit!!')\r\n                    return false\r\n                }\r\n            })\r\n        },\r\n\r\n        end_classroom(row, index) {\r\n            this.$confirm('是否要结束课堂?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            })\r\n                .then(_ => {\r\n                    this.$axios({\r\n                        url: this.$api.baseURL + 'api/teacher/order/finishClassroom',\r\n                        method: 'post',\r\n                        data: {\r\n                            'classroomId': row.id\r\n                        }\r\n                    }).then(r => {\r\n                        if (r.data.status == 200) {\r\n                            this.$message({\r\n                                message: r.data.body.msg,\r\n                                type: 'success'\r\n                            })\r\n                            this.getTableData()\r\n                        }\r\n                        if (r.data.status == 400) {\r\n                            this.$message({\r\n                                message: r.data.body.msg,\r\n                                type: 'warning'\r\n                            })\r\n                            this.getTableData()\r\n                        }\r\n                    })\r\n                    // $.ajax({\r\n                    //     type: 'post',\r\n                    //     dataType: 'json',\r\n                    //     data: {\r\n                    //         'token': token,\r\n                    //         'classroomId': row.id\r\n                    //     },\r\n                    //     url: '' + baseURL + 'api/teacher/order/finishClassroom',\r\n                    //     success: function(json) {\r\n                    //         if (json.status == 200) {\r\n                    //             vm.$message({\r\n                    //                 message: json.body.msg,\r\n                    //                 type: 'success'\r\n                    //             })\r\n                    //             vm.getTableData()\r\n                    //         }\r\n                    //         if (json.status == 400) {\r\n                    //             vm.$message({\r\n                    //                 message: json.body.msg,\r\n                    //                 type: 'warning'\r\n                    //             })\r\n                    //             vm.getTableData()\r\n                    //         }\r\n                    //     }\r\n                    // })\r\n                })\r\n                .catch(_ => { })\r\n        },\r\n\r\n        handleSizeChange(val) {\r\n            console.log(`每页 ${val} 条`)\r\n            this.limit = val\r\n            this.getTableData()\r\n        },\r\n\r\n        handleChangearea(val) {\r\n            let obj = {}\r\n            obj = this.selects.find((item) => {\r\n                return item.userId === val\r\n            })\r\n            this.userId = obj.userId\r\n            this.username = obj.username\r\n        },\r\n        handleCurrentChange(val) {\r\n            this.val = val\r\n            this.getTableData()\r\n        },\r\n\r\n        handleSelectionChange(val) {\r\n            this.multipleSelection = val\r\n            const ids = []\r\n            this.multipleSelection.map((item) => {\r\n                var id = item.id\r\n                ids.push('' + id + '')\r\n            })\r\n            this.selectedIDs = ids\r\n            console.log('多选', ids)\r\n            this.idss = this.selectedIDs\r\n            console.log(this.idss)\r\n        }\r\n    }\r\n}\r\n",null]}
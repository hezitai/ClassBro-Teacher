{"remainingRequest":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/login/index.vue","mtime":1596184729874},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { setLocal, setCookie } from '@/utils/auth'\nexport default {\n    name: 'Login',\n    data() {\n        return {\n            loginForm: {\n                username: '',\n                password: ''\n            },\n            loading: false,\n            passwordType: 'password',\n            redirect: undefined\n        }\n    },\n    watch: {\n        $route: {\n            handler: function(route) {\n                // console.log(route)\n                this.redirect = route.query && route.query.redirect\n                // console.log(this.redirect)\n            },\n            immediate: true\n        }\n    },\n\n    methods: {\n        showPwd() {\n            if (this.passwordType === 'password') {\n                this.passwordType = ''\n            } else {\n                this.passwordType = 'password'\n            }\n            this.$nextTick(() => {\n                this.$refs.password.focus()\n            })\n        },\n        handleLogin() {\n            // , {\n            //     mobile: this.loginForm.username,\n            //     password: this.loginForm.password\n            // }\n            this.$axios\n                .post(this.$api.baseURL + 'api/teacher/login?mobile=' + this.loginForm.username + '&password=' + this.loginForm.password)\n                .then(r => {\n                    if (r.data.status === 200) {\n                        setLocal(\n                            'teacinfo',\n                            JSON.stringify(r.data.body.teacUser)\n                        )\n                        setLocal('teactoken', r.data.body.token)\n                        setCookie('teactoken', r.data.body.token)\n                        this.loading = true\n                        this.$router.push({ path: '/orders' })\n                        this.loading = false\n                    } else {\n                        this.$message({\n                            type: 'error',\n                            message: r.data.body.msg\n                        })\n                    }\n                })\n                .catch(r => {\n                    this.loading = false\n                })\n            // this.$axios({\n            //     url: this.$api.baseURL + 'api/teacher/login',\n            //     method: 'post',\n            //     // headers: {\n            //     //     'Content-Type': 'application/json'\n            //     // },\n            //     data: {\n            //         mobile: this.loginForm.username,\n            //         password: this.loginForm.password\n            //     }\n            // })\n                // .then(r => {\n                //     debugger\n                //     if (r.data.status === 200) {\n                //         setLocal(\n                //             'teacinfo',\n                //             JSON.stringify(r.data.body.teacUser)\n                //         )\n                //         setLocal('teactoken', r.data.body.token)\n                //         this.loading = true\n                //         this.$router.push({ path: '/orders' })\n                //         this.loading = false\n                //     } else {\n                //         this.$message({\n                //             type: 'error',\n                //             message: r.data.body.msg\n                //         })\n                //     }\n                // })\n                // .catch(r => {\n                //     this.loading = false\n                // })\n        }\n    }\n}\n",null]}
{"remainingRequest":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/babel-loader/lib/index.js!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/detail/seller_detailWy.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/detail/seller_detailWy.vue","mtime":1561620362000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  data: function data() {\n    return {\n      sellerDetailWy: false,\n      dropboxList: [],\n      wyactiveNames: null,\n      wylog: null,\n      wyassociated: null,\n      wyorder: {\n        upload: []\n      },\n      iswy: false,\n      wyid: null,\n      typeOrder: true,\n      cailiaofei: true,\n      history: '',\n      dialogVisible: false,\n      checked: false,\n      courses: '',\n      urls: [],\n      id: '',\n      btnstatus: false,\n      classroomdata: [],\n      studCoursewareList: [],\n      filelist: [],\n      ruleForm: {\n        course: ''\n      },\n      ruleForm1: {\n        username: '',\n        nickname: '',\n        sellerDemandDesc: '',\n        hourlyWage: ''\n      },\n      ruleForm2: {\n        courseCode: '',\n        courseName: '',\n        type: ''\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.getclassroomdata();\n    this.coursedata();\n  },\n  methods: {\n    downDropbox: function downDropbox(path, name) {\n      window.open(path);\n    },\n    down: function down(url, fileName) {\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', url, true);\n      xhr.responseType = 'blob';\n\n      xhr.onload = function () {\n        var blob = this.response;\n\n        if (window.navigator.msSaveOrOpenBlob) {\n          navigator.msSaveBlob(blob, fileName);\n        } else {\n          var link = document.createElement('a');\n          link.style.display = 'none';\n          link.href = window.URL.createObjectURL(blob);\n          link.download = fileName;\n          link.click();\n          window.URL.revokeObjectURL(link.href);\n        }\n      };\n\n      xhr.ontimeout = function (e) {};\n\n      xhr.onerror = function (e) {};\n\n      xhr.send();\n    },\n    revise: function revise(row, index) {\n      var _this = this;\n\n      this.$axios({\n        url: this.$api.baseURL + 'api/teacher/order/getClassroomConversation',\n        params: {\n          classroomId: row.id\n        }\n      }).then(function (r) {\n        _this.history = [];\n\n        if (r.data.status == 400) {\n          _this.dialogVisible = true;\n          return;\n        } else {\n          var timestampToTime = function timestampToTime(timestamp) {\n            var date = new Date(timestamp);\n            var Y = date.getFullYear() + '-';\n            var M = (date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1) + '-';\n            var D = date.getDate() + ' ';\n            var h = date.getHours() + ':';\n            var m = date.getMinutes() + ':';\n            var s = date.getSeconds();\n            return Y + M + D + h + m + s;\n          };\n\n          _this.dialogVisible = true;\n          var ess = [];\n\n          for (var i = 0; i < r.data.body.list.length; i++) {\n            var es = [];\n            var joinTime = timestampToTime(r.data.body.list[i].joinTime);\n            var leaveTime = timestampToTime(r.data.body.list[i].leaveTime);\n            var userroleid = r.data.body.list[i].userroleid;\n            var suerrole = '';\n\n            if (userroleid == '0') {\n              suerrole = '讲师';\n            } else if (userroleid == '1') {\n              suerrole = '助教';\n            } else if (userroleid == 2) {\n              suerrole = '学员';\n            } else if (userroleid == '3') {\n              suerrole = '直播用户';\n            } else {\n              suerrole = '巡检员';\n            }\n\n            var m = r.data.body.list[i].duration;\n            var duration = m / 60;\n            var durations;\n            durations = duration.toFixed(2);\n            es.nickname = r.data.body.list[i].nickname;\n            es.joinTime = joinTime;\n            es.suerrole = suerrole;\n            es.duration = durations;\n            es.leaveTime = leaveTime;\n            ess.push(es);\n          }\n\n          _this.history = ess;\n          console.log(_this.history);\n        }\n      });\n      this.dialogVisible = true;\n    },\n    success: function success(response, file, fileList) {\n      if (response.status == 200) {\n        this.$message({\n          message: '上传文件成功',\n          type: 'success'\n        });\n        this.fileList = []; // $('.ul').empty()\n\n        this.getclassroomdata();\n      }\n\n      if (response.status == 400) {\n        this.$message({\n          message: response.body.msg,\n          type: 'warning'\n        });\n        this.fileList = [];\n      }\n    },\n    onerror: function onerror(response, file, fileList) {\n      this.$message({\n        message: response.body.msg,\n        type: 'warning'\n      });\n    },\n    check: function check(val) {\n      if (val == true) {\n        $('.checkbox').prop('checked', true);\n      } else {\n        $('.checkbox').prop('checked', false);\n      }\n    },\n    coursedata: function coursedata() {\n      var _this2 = this;\n\n      this.$axios({\n        url: this.$api.baseURL + 'api/teacher/courseware/groupList',\n        params: {\n          page: 1,\n          limit: 1000\n        }\n      }).then(function (r) {\n        if (r.data.status == 200) {\n          var lists = [];\n          r.data.body.list.forEach(function (element) {\n            var list = {};\n            list.groupName = element.groupName;\n            list.name = element.groupName.split(' ')[0];\n            list.id = element.id;\n            lists.push(list);\n          });\n          _this2.courses = lists;\n        }\n      });\n    },\n    change_course: function change_course(courseid) {\n      this.data.groupId = courseid;\n    },\n    downFile: function downFile(url) {\n      window.open(url);\n    },\n    getclassroomdata: function getclassroomdata() {\n      var _this3 = this;\n\n      // return null\n      // }\n      var ids = this.$route.query.id;\n      this.wyid = this.$route.query.wyid;\n      this.$axios({\n        url: this.$api.baseURL + 'api/teacher/order/queryWyardOrderInfo?courseId=' + ids\n      }).then(function (r) {\n        _this3.dropboxList = r.data.data.order.completed_work;\n        _this3.wyorder = r.data.data.order;\n        _this3.wyassociated = r.data.data.associated;\n        _this3.wylog = r.data.data.log;\n        _this3.wyactiveNames = r.data.data.order.activeNames;\n      });\n      this.$axios({\n        url: this.$api.baseURL + 'api/teacher/order/getCourseObject?id=' + ids + '',\n        params: {\n          page: 1,\n          limit: 6,\n          exceptionType: ''\n        }\n      }).then(function (r) {\n        var json = r.data;\n\n        if (json.body.studPurchaseOrder.type == '0') {\n          _this3.cailiaofei = false;\n        }\n\n        _this3.ruleForm1.hourlyWage = json.body.hourlyWage;\n        _this3.classroomdata = json.body.classroomList;\n        _this3.studCoursewareList = json.body.studCoursewareList;\n        _this3.studdate = json.body.studUser;\n        _this3.filelist = json.body.studCoursewareList;\n        _this3.ruleForm1.orderNo = json.body.orderNo;\n        _this3.ruleForm1.remark = json.body.remark;\n        _this3.ruleForm1.scheduledTime = json.body.studPurchaseOrder.scheduledTime;\n        _this3.ruleForm1.allSchooltime = json.body.allSchooltime;\n        _this3.ruleForm1.totalPrice = json.body.studPurchaseOrder.totalPrice + ' ' + json.body.studPurchaseOrder.currency;\n        _this3.ruleForm1.prepayment = json.body.studPurchaseOrder.prepayment + ' ' + json.body.studPurchaseOrder.currency;\n        _this3.ruleForm1.prices1 = Number(json.body.teacG) + Number(json.body.teacPreG);\n        _this3.ruleForm1.prices2 = Number(json.body.teacOtg) + Number(json.body.teacPreOtg);\n        _this3.ruleForm1.sellerDemandDesc = json.body.studPurchaseOrder.sellerDemandDesc;\n        _this3.ruleForm2.spareTime = json.body.studPurchaseOrder.spareTime;\n\n        if (_this3.ruleForm2.spareTime != null) {\n          var spareTime = json.body.studPurchaseOrder.spareTime.split('|');\n          var one = spareTime[0];\n          var ones = one.split(',');\n          _this3.ruleForm2.am1 = ones[0];\n          _this3.ruleForm2.bm1 = ones[1];\n          _this3.ruleForm2.pm1 = ones[2];\n          var two = spareTime[1];\n          var twos = two.split(',');\n          _this3.ruleForm2.am2 = twos[0];\n          _this3.ruleForm2.bm2 = twos[1];\n          _this3.ruleForm2.pm2 = twos[2];\n          var three = spareTime[2];\n          var threes = three.split(',');\n          _this3.ruleForm2.am3 = threes[0];\n          _this3.ruleForm2.bm3 = threes[1];\n          _this3.ruleForm2.pm3 = threes[2];\n          var four = spareTime[3];\n          var fours = four.split(',');\n          _this3.ruleForm2.am4 = fours[0];\n          _this3.ruleForm2.bm4 = fours[1];\n          _this3.ruleForm2.pm4 = fours[2];\n          var five = spareTime[4];\n          var fives = five.split(',');\n          _this3.ruleForm2.am5 = fives[0];\n          _this3.ruleForm2.bm5 = fives[1];\n          _this3.ruleForm2.pm5 = fives[2];\n          var six = spareTime[5];\n          var sixs = six.split(',');\n          _this3.ruleForm2.am6 = sixs[0];\n          _this3.ruleForm2.bm6 = sixs[1];\n          _this3.ruleForm2.pm6 = sixs[2];\n          var seven = spareTime[6];\n          var sevens = seven.split(',');\n          _this3.ruleForm2.am7 = sevens[0];\n          _this3.ruleForm2.bm7 = sevens[1];\n          _this3.ruleForm2.pm7 = sevens[2];\n        }\n\n        if (json.body.statused == 1) {\n          _this3.ruleForm1.statused = '未处理（无任何销售接单）';\n        }\n\n        if (json.body.statused == 2) {\n          _this3.ruleForm1.statused = '待审核';\n        }\n\n        if (json.body.statused == 4) {\n          _this3.ruleForm1.statused = '待确定';\n        }\n\n        if (json.body.statused == 8) {\n          _this3.ruleForm1.statused = '待规划（等待教师/运营接单）';\n        }\n\n        if (json.body.statused == 16) {\n          _this3.ruleForm1.statused = '规划中(订单第一次超时等待运营接单)';\n        }\n\n        if (json.body.statused == 32) {\n          _this3.ruleForm1.statused = '规划中(订单第二次超时等待运营主管强制指派)';\n        }\n\n        if (json.body.statused == 64) {\n          _this3.ruleForm1.statused = '规划中(运营接单待指派，正在处理)';\n        }\n\n        if (json.body.statused == 128) {\n          _this3.ruleForm1.statused = '待排课';\n        }\n\n        if (json.body.statused == 256) {\n          _this3.ruleForm1.statused = '已排课';\n        }\n\n        if (json.body.statused == 512) {\n          _this3.ruleForm1.statused = '申请结课中';\n        }\n\n        if (json.body.statused == 1024) {\n          _this3.ruleForm1.statused = '已结课';\n        }\n\n        if (json.body.statused == 2048) {\n          _this3.ruleForm1.statused = '已强制结课';\n        }\n\n        if (json.body.statused == 4096) {\n          _this3.ruleForm1.statused = '已取消';\n        }\n\n        if (json.body.statused == 8192) {\n          _this3.ruleForm1.statused = '坏单申请中';\n        }\n\n        if (json.body.statused == 16384) {\n          _this3.ruleForm1.statused = '订单作废';\n        }\n\n        if (json.body.statused == 32768) {\n          _this3.ruleForm1.statused = '销售被更换';\n        }\n\n        if (json.body.statused == 65536) {\n          _this3.ruleForm1.statused = '事故单申请中';\n        }\n\n        if (json.body.statused == 131072) {\n          _this3.ruleForm1.statused = '事故单已处理';\n        }\n\n        if (json.body.statused == 262144) {\n          _this3.ruleForm1.statused = '事故单更换教师';\n        }\n\n        _this3.ruleForm1.username = json.body.sysSeller.username;\n        _this3.ruleForm1.nickname = json.body.sysUserEntity.username;\n        _this3.ruleForm1.nickname1 = json.body.teacUser.username;\n        _this3.ruleForm1.teacFixedPrice = json.body.teacFixedPrice;\n        _this3.ruleForm2.courseName = json.body.studPurchaseOrder.courseName;\n        _this3.ruleForm2.courseCode = json.body.studPurchaseOrder.courseCode;\n\n        if (json.body.studPurchaseOrder.type == 0) {\n          _this3.ruleForm2.type = '定制辅导';\n        }\n\n        if (json.body.studPurchaseOrder.type == 1) {\n          _this3.ruleForm2.type = '考前突击';\n        }\n\n        if (json.body.studPurchaseOrder.type == 2) {\n          _this3.ruleForm2.type = '包课辅导';\n        }\n\n        if (json.body.studPurchaseOrder.type == 4) {\n          _this3.ruleForm2.type = '论文辅导';\n        }\n\n        if (json.body.studPurchaseOrder.type == 32) {\n          _this3.ruleForm2.type = '特殊订单';\n        }\n\n        _this3.ruleForm.nickname = json.body.studUser.nickName;\n        _this3.ruleForm.schoolName = json.body.sysUniversity.name;\n        _this3.ruleForm.temCourseName = json.body.sysProfessionalCourses.chineseName;\n        _this3.ruleForm.levelName = json.body.studUser.eduName;\n        _this3.ruleForm.schoolYear = json.body.studPurchaseOrder.schoolYear;\n        _this3.ruleForm.endCourseTime = json.body.studPurchaseOrder.endCourseTime;\n        _this3.ruleForm.examTime = json.body.studPurchaseOrder.examTime;\n        _this3.ruleForm.schoolAccount = json.body.studPurchaseOrder.schoolAccount;\n        _this3.ruleForm.schoolPws = json.body.studPurchaseOrder.schoolPws;\n      });\n    }\n  }\n};\nexports.default = _default;",null]}
{"remainingRequest":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/babel-loader/lib/index.js!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/login/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/src/views/login/index.vue","mtime":1596184729874},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/hezitai/Desktop/Daobi/ClassBroTeacher/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _auth = require(\"@/utils/auth\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'Login',\n  data: function data() {\n    return {\n      loginForm: {\n        username: '',\n        password: ''\n      },\n      loading: false,\n      passwordType: 'password',\n      redirect: undefined\n    };\n  },\n  watch: {\n    $route: {\n      handler: function handler(route) {\n        // console.log(route)\n        this.redirect = route.query && route.query.redirect; // console.log(this.redirect)\n      },\n      immediate: true\n    }\n  },\n  methods: {\n    showPwd: function showPwd() {\n      var _this = this;\n\n      if (this.passwordType === 'password') {\n        this.passwordType = '';\n      } else {\n        this.passwordType = 'password';\n      }\n\n      this.$nextTick(function () {\n        _this.$refs.password.focus();\n      });\n    },\n    handleLogin: function handleLogin() {\n      var _this2 = this;\n\n      // , {\n      //     mobile: this.loginForm.username,\n      //     password: this.loginForm.password\n      // }\n      this.$axios.post(this.$api.baseURL + 'api/teacher/login?mobile=' + this.loginForm.username + '&password=' + this.loginForm.password).then(function (r) {\n        if (r.data.status === 200) {\n          (0, _auth.setLocal)('teacinfo', JSON.stringify(r.data.body.teacUser));\n          (0, _auth.setLocal)('teactoken', r.data.body.token);\n          (0, _auth.setCookie)('teactoken', r.data.body.token);\n          _this2.loading = true;\n\n          _this2.$router.push({\n            path: '/orders'\n          });\n\n          _this2.loading = false;\n        } else {\n          _this2.$message({\n            type: 'error',\n            message: r.data.body.msg\n          });\n        }\n      }).catch(function (r) {\n        _this2.loading = false;\n      }); // this.$axios({\n      //     url: this.$api.baseURL + 'api/teacher/login',\n      //     method: 'post',\n      //     // headers: {\n      //     //     'Content-Type': 'application/json'\n      //     // },\n      //     data: {\n      //         mobile: this.loginForm.username,\n      //         password: this.loginForm.password\n      //     }\n      // })\n      // .then(r => {\n      //     debugger\n      //     if (r.data.status === 200) {\n      //         setLocal(\n      //             'teacinfo',\n      //             JSON.stringify(r.data.body.teacUser)\n      //         )\n      //         setLocal('teactoken', r.data.body.token)\n      //         this.loading = true\n      //         this.$router.push({ path: '/orders' })\n      //         this.loading = false\n      //     } else {\n      //         this.$message({\n      //             type: 'error',\n      //             message: r.data.body.msg\n      //         })\n      //     }\n      // })\n      // .catch(r => {\n      //     this.loading = false\n      // })\n    }\n  }\n};\nexports.default = _default;",null]}